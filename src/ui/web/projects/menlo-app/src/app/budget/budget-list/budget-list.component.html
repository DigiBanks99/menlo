<div class="budget-list-container">
  <header class="page-header">
    <h1>Budget Management</h1>
    <p>Track and manage your family budgets with AI-powered insights</p>
    <button class="btn btn-primary">+ Create New Budget</button>
  </header>

  @if (loading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading budgets...</p>
    </div>
  } @else if (error()) {
    <div class="error-state">
      <div class="error-icon">‚ö†Ô∏è</div>
      <h2>Error loading budgets</h2>
      <p>{{ error() }}</p>
      <button class="btn btn-secondary" (click)="loadBudgets()">Try Again</button>
    </div>
  } @else {
    <section class="budgets-section">
      @if (budgets().length > 0) {
        <div class="budgets-grid">
          @for (budget of budgets(); track budget.id) {
            <div class="budget-card">
              <div class="budget-header">
                <h3>{{ budget.name }}</h3>
                <span class="budget-period">{{ formatPeriod(budget) }}</span>
              </div>
              <div class="budget-progress">
                <div class="progress-bar">
                  <div class="progress-fill" [style.width.%]="getSpentPercentage(budget)"></div>
                </div>
                <div class="progress-text">
                  <span>R{{ budget.total.amount | number:'1.0-0' }} total</span>
                  <span class="percentage">{{ budget.categoryCount }} categories</span>
                </div>
              </div>
              <div class="budget-status" [class]="'status-' + getStatusInfo(budget).cssClass">
                <span class="status-indicator">{{ getStatusInfo(budget).icon }}</span>
                <span class="status-text">{{ getStatusInfo(budget).text }}</span>
              </div>
              <div class="budget-actions">
                <button class="btn btn-small">View Details</button>
                <button class="btn btn-small btn-secondary">Edit</button>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <div class="empty-icon">üí∞</div>
          <h2>No budgets yet</h2>
          <p>Create your first budget to start tracking your family's finances</p>
          <button class="btn btn-primary">Create Your First Budget</button>
        </div>
      }
    </section>
  }
</div>
